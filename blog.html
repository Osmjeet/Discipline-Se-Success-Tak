<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Discipline Se Success Tak ‚Äî Blogs</title>
  <meta name="description" content="Series-wise blog list ‚Äî click a title to expand a full post inline." />
  <link rel="icon" href="author.jpg" />
  <style>
    :root{
      --accent:#0b8f76;
      --accent-dark:#065744;
      --muted:#6b7a75;
      --bg:#fbfffc;
      --card:#ffffff;
      --radius:14px;
      --maxw:980px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);font-family:Inter, 'Noto Sans Devanagari', system-ui, -apple-system, "Segoe UI", Roboto, Arial;color:#0e2b26;-webkit-font-smoothing:antialiased;}
    header{background:var(--accent-dark);color:#fff;padding:14px 20px;position:sticky;top:0;z-index:80;box-shadow:0 2px 6px rgba(2,10,8,0.12)}
    .nav{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;gap:18px}
    .brand{font-weight:800;letter-spacing:-0.4px}
    .nav a{color:#fff;text-decoration:none;font-weight:600}
    .wrap{max-width:var(--maxw);margin:26px auto;padding:18px;}
    .top-controls{display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-bottom:18px}
    .search{flex:1}
    .search input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e6f4ef;background:#fffefc;font-size:15px}
    .series-list{display:flex;gap:12px;flex-direction:column}
    .series-card{background:linear-gradient(180deg,#f7fff9,#ffffff);padding:16px;border-radius:12px;border:1px solid #e6f7ef}
    .series-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .series-title{font-weight:800;color:var(--accent-dark);font-size:18px}
    .series-desc{color:var(--muted);margin-top:8px}
    .posts-wrap{margin-top:18px;display:grid;grid-template-columns:1fr;gap:18px}
    .panel{background:var(--card);padding:18px;border-radius:14px;border:1px solid #ecf7f4;box-shadow:0 8px 20px rgba(6,20,18,0.03)}
    .panel h3{margin:0;color:var(--accent-dark);font-size:18px}
    .post-row{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap;padding:14px;border-radius:10px;border:1px solid #f0f8f5;background:#fff}
    .preview{flex:1;min-width:220px}
    .preview p{margin:8px 0;color:#2f514a}
    .read-btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:14px;text-decoration:none;font-weight:700;display:inline-block}
    .read-btn:active{transform:translateY(1px)}
    .content-area{margin-top:12px}
    .post-full{padding:18px;border-radius:10px;background:#f7fffb;border:1px solid #e6f8f0}
    .post-full h1{margin:0;color:var(--accent-dark);font-size:22px}
    .post-full .sub{color:var(--muted);margin-top:6px}
    .post-full p{margin:12px 0;line-height:1.7;color:#123532}
    .post-full ul{margin:10px 0 18px 20px}
    .post-full li{margin:8px 0}
    .author-credit{margin-top:18px;padding-top:12px;border-top:1px dashed #e6f3ee;color:var(--muted);font-weight:700}
    .series-block{margin-top:20px}
    .series-heading{background:#f2fff7;border-radius:10px;padding:12px 14px;border:1px solid #e6f7ef;color:var(--accent-dark);font-weight:800}
    footer{text-align:center;color:var(--muted);margin:26px 0;font-size:13px}
    /* responsive */
    @media(min-width:880px){
      .posts-wrap{grid-template-columns:1fr}
      .post-row{align-items:center}
      .preview{max-width:520px}
      .post-full h1{font-size:28px}
    }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div style="display:flex;gap:12px;align-items:center;">
        <div style="width:36px;height:36px;border-radius:8px;background:#0f6b58;display:flex;align-items:center;justify-content:center;font-weight:800">JS</div>
        <div class="brand">Discipline Se Success Tak</div>
      </div>
      <div style="margin-left:auto;display:flex;gap:14px;align-items:center;">
        <a href="index.html">üè† Home</a>
        <a href="blog.html">üìù Blogs</a>
        <a href="author.html">üë§ Author</a>
        <a href="ebook.html">üìò Free eBook</a>
      </div>
    </div>
  </header>

  <main class="wrap" id="main">
    <div class="top-controls">
      <div class="search">
        <input id="searchInput" placeholder="Search blogs by title or preview..." />
      </div>
    </div>

    <!-- Series selector -->
    <div class="series-list">
      <div class="series-card">
        <div class="series-row">
          <div>
            <div class="series-title">Series 1‚Äì10 ‚Äî Discipline Se Success Tak</div>
            <div class="series-desc">‡§Ø‡§π ‡§™‡§π‡§≤‡•Ä ‡§∏‡•Ä‡§∞‡•Ä‡§ú‡§º discipline, consistency ‡§î‡§∞ ‡§õ‡•ã‡§ü‡•á ‡§∞‡•ã‡§ú‡§®‡§æ ‡§ï‡•á actions ‡§™‡§∞ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§π‡•à ‚Äî practical lessons ‡§ú‡•ã daily routine ‡§Æ‡•á‡§Ç apply ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§</div>
          </div>
          <div style="align-self:center">
            <button class="read-btn" data-series="Series 1‚Äì10" onclick="expandSeries('Series 1‚Äì10')">Open</button>
          </div>
        </div>
      </div>

      <div class="series-card" style="margin-top:10px">
        <div class="series-row">
          <div>
            <div class="series-title">Series 11‚Äì20 ‚Äî Negativity Se Overcome</div>
            <div class="series-desc">‡§á‡§∏ ‡§∏‡•Ä‡§∞‡•Ä‡§ú‡§º ‡§ï‡§æ ‡§Æ‡§ï‡§º‡§∏‡§¶ ‡§π‡•à negativity ‡§ï‡•ã ‡§™‡§π‡§ö‡§æ‡§®‡§®‡§æ, boundaries ‡§¨‡§®‡§æ‡§®‡§æ ‡§î‡§∞ ‡§â‡§∏‡•á positive energy ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§®‡§æ‡•§</div>
          </div>
          <div style="align-self:center">
            <button class="read-btn" data-series="Series 11‚Äì20" onclick="expandSeries('Series 11‚Äì20')">Open</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Posts list -->
    <div class="posts-wrap" id="postsWrap" aria-live="polite" style="margin-top:22px">
      <!-- populated by JS -->
    </div>

    <footer>
      ¬© 2025 Jeet S Singh ‚Äî Discipline ‚Ä¢ Faith ‚Ä¢ Success
    </footer>
  </main>

  <script>
    // CONFIG: path to posts JSON
    const POSTS_PATH = 'posts/posts.json'; // change to 'posts.json' if needed

    // helper
    function el(tag, attrs={}, ...ch){
      const e = document.createElement(tag);
      for(const k in attrs) {
        if(k==='class') e.className = attrs[k];
        else if(k==='html') e.innerHTML = attrs[k];
        else e.setAttribute(k, attrs[k]);
      }
      ch.flat().forEach(c=>{
        if(c==null) return;
        if(typeof c === 'string') e.appendChild(document.createTextNode(c));
        else e.appendChild(c);
      });
      return e;
    }

    // fetch posts
    async function loadPosts(){
      try{
        const res = await fetch(POSTS_PATH, {cache:'no-store'});
        if(!res.ok) throw new Error('posts json not found');
        const posts = await res.json();
        return posts;
      }catch(e){
        console.error(e);
        document.getElementById('postsWrap').innerHTML = '<div style="color:#c23">Unable to load blogs. Check posts/posts.json path.</div>';
        return [];
      }
    }

    // render list grouped by series
    function groupBySeries(items){
      const map = {};
      items.forEach(p=>{
        const s = p.series || 'Series 1‚Äì10';
        if(!map[s]) map[s]=[];
        map[s].push(p);
      });
      return map;
    }

    // render UI
    async function render(){
      const posts = await loadPosts();
      const grouped = groupBySeries(posts);
      const wrap = document.getElementById('postsWrap');
      wrap.innerHTML = '';

      // order: Series 1‚Äì10 then Series 11‚Äì20 then others
      const order = ['Series 1‚Äì10','Series 11‚Äì20', ...Object.keys(grouped).filter(k=>!['Series 1‚Äì10','Series 11‚Äì20'].includes(k))];

      order.forEach(seriesName=>{
        if(!grouped[seriesName]) return;
        const panel = el('div',{class:'panel'});
        const heading = el('div',{class:'series-block'});
        heading.appendChild(el('div',{class:'series-heading'}, seriesName));
        panel.appendChild(heading);

        grouped[seriesName].forEach(post=>{
          const row = el('div',{class:'post-row', 'data-id': post.id});
          const left = el('div',{class:'preview'});
          left.appendChild(el('h3',{}, post.title));
          left.appendChild(el('p',{}, post.preview));
          left.appendChild(el('div',{style:'color:#a0b8b1;font-size:13px;margin-top:8px'}, `ID: ${post.id} ‚Äî File: ${post.file}`));

          const right = el('div',{style:'display:flex;align-items:center;gap:10px'});
          const read = el('a',{href:'#', class:'read-btn'}, 'Read');
          read.addEventListener('click', (ev)=>{
            ev.preventDefault();
            loadIntoItem(post, row);
          });

          right.appendChild(read);
          row.appendChild(left);
          row.appendChild(right);

          // placeholder for expanded content
          const contentArea = el('div',{class:'content-area'});
          row.appendChild(contentArea);

          panel.appendChild(row);
        });

        wrap.appendChild(panel);
      });
    }

    // Expand/collapse series (scrolls to first post)
    function expandSeries(seriesName){
      const postsWrap = document.getElementById('postsWrap');
      const firstCard = Array.from(postsWrap.querySelectorAll('.series-heading')).find(h=>h.textContent.trim()===seriesName);
      if(firstCard){
        // toggle: if already visible, collapse by scrolling a bit up
        const rect = firstCard.getBoundingClientRect();
        const absoluteTop = window.pageYOffset + rect.top - 12;
        window.scrollTo({top:absoluteTop, behavior:'smooth'});
      }
    }

    // Load post content into the row's content area (inline)
    async function loadIntoItem(post, row){
      const area = row.querySelector('.content-area');
      // if already loaded, toggle visibility
      if(area.dataset.loaded === String(post.id)){
        area.innerHTML = '';
        area.dataset.loaded = '';
        return;
      }
      // clear other expanded posts
      document.querySelectorAll('.content-area').forEach(a=>{
        a.innerHTML=''; a.dataset.loaded='';
      });

      // fetch the post file (assume HTML snippet or markdown converted)
      try{
        const res = await fetch(post.file, {cache:'no-store'});
        let html = '';
        if(res.ok){
          html = await res.text();
        } else {
          // fallback: build from post.content if available
          if(post.content) {
            html = `<div class="post-full">${post.content}</div>`;
          } else {
            html = `<div class="post-full"><p>Post content not found (${post.file})</p></div>`;
          }
        }

        // wrap content and ensure final 'Written by' appears at bottom
        const wrapper = document.createElement('div');
        wrapper.className = 'post-full';
        wrapper.innerHTML = html;

        // ensure author credit (append if not present)
        if(!/Written by/i.test(wrapper.textContent) && !/Jeet S Singh/i.test(wrapper.textContent)){
          const credit = document.createElement('div');
          credit.className = 'author-credit';
          credit.textContent = 'Written by Jeet S Singh ‚Äî Author of "Discipline Se Success Tak"';
          wrapper.appendChild(credit);
        }

        area.appendChild(wrapper);
        area.dataset.loaded = String(post.id);

        // SCROLL: bring the expanded wrapper into view but offset by header
        setTimeout(()=>{
          try {
            const header = document.querySelector('header');
            const headerHeight = header ? header.offsetHeight : 0;
            const rect = wrapper.getBoundingClientRect();
            const absoluteTop = window.pageYOffset + rect.top;
            const target = Math.max(absoluteTop - headerHeight - 12, 0);
            window.scrollTo({ top: target, behavior: 'smooth' });
          } catch(e){
            wrapper.scrollIntoView({behavior:'smooth', block:'center'});
          }
        }, 80);

      }catch(err){
        area.innerHTML = `<div style="color:#c23">Error loading post: ${err.message}</div>`;
      }
    }

    // search feature
    function attachSearch(){
      const input = document.getElementById('searchInput');
      input.addEventListener('input', ()=>{
        const q = input.value.trim().toLowerCase();
        document.querySelectorAll('.post-row').forEach(row=>{
          const title = row.querySelector('h3')?.textContent.toLowerCase() || '';
          const preview = row.querySelector('.preview p')?.textContent.toLowerCase() || '';
          row.style.display = (title.includes(q) || preview.includes(q)) ? '' : 'none';
        });
      });
    }

    // initial
    (async function init(){
      await render();
      attachSearch();
    })();
  </script>
</body>
</html>
