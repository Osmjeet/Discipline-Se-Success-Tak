<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blogs ‚Äî Jeet S Singh (Author of Discipline Se Success Tak)</title>
  <meta name="description" content="Read inspiring blogs by Jeet S Singh, Author of 'Discipline Se Success Tak'. Learn about discipline, success, motivation and daily habits." />
  <link rel="canonical" href="https://discipline-se-success-tak.vercel.app/blog.html" />

  <style>
    /* ====== Layout basics ====== */
    :root{
      --bg:#f7fbfa;
      --card:#ffffff;
      --accent:#0bb39a;
      --accent-dark:#078a72;
      --muted:#5b6b73;
      --maxw:1100px;
      --radius:12px;
      --text:#0e2b26;
      --nav-h:64px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, "Noto Sans Devanagari", system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    a{color:var(--accent-dark); text-decoration:none}
    a:hover{text-decoration:underline}

    /* ====== Top nav ====== */
    header.sitebar{background:#06493f;padding:10px 18px;position:sticky;top:0;z-index:50;box-shadow:0 4px 14px rgba(2,6,10,0.08)}
    .navwrap{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px;color:#fff}
    .nav-left{display:flex;align-items:center;gap:14px}
    .brand{font-weight:800;font-size:16px}
    .navlinks{display:flex;gap:14px;align-items:center}
    .navlinks a{color:#fff;font-weight:700;font-size:14px;padding:8px 10px;border-radius:8px}
    .navlinks a:hover{background:rgba(255,255,255,0.06)}
    .top-actions{display:flex;gap:10px;align-items:center}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;font-weight:800}
    .btn.ghost{background:transparent;border:2px solid rgba(255,255,255,0.08);color:#fff}

    /* ====== Main area ====== */
    .wrap{max-width:var(--maxw);margin:22px auto;padding:0 18px;display:grid;grid-template-columns:320px 1fr;gap:22px;align-items:start}
    @media(max-width:980px){.wrap{grid-template-columns:1fr;padding:12px}}
    /* sidebar */
    aside.sidebar{position:relative}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(8,18,16,0.05);border:1px solid #eef9f5}
    .search input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e9f6f1;font-size:14px;color:var(--text)}
    .series-filter{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    .tag{background:#f0fff9;color:#045740;padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px;cursor:pointer}
    .tag.active{background:linear-gradient(90deg,var(--accent),var(--accent-dark));color:#fff}
    ul.posts-list{list-style:none;padding:0;margin:12px 0;display:flex;flex-direction:column;gap:8px;max-height:64vh;overflow:auto}
    ul.posts-list li{padding:10px;border-radius:10px}
    .post-btn{display:flex;flex-direction:column;align-items:flex-start;background:transparent;border:0;padding:8px;width:100%;text-align:left;cursor:pointer}
    .post-btn strong{display:block;color:#06493f}
    .post-btn .preview{font-size:13px;color:var(--muted);margin-top:6px}
    .post-btn.active{background:#f0fff9;border-left:4px solid var(--accent);padding-left:12px}

    /* main content */
    main.content{min-height:60vh}
    .post-card{background:var(--card);border-radius:var(--radius);padding:22px;box-shadow:0 12px 30px rgba(8,18,16,0.06);border:1px solid #eef9f5}
    .post-card h1{margin:0;font-size:24px;color:var(--accent-dark)}
    .post-sub{color:var(--muted);margin-top:8px}
    .post-card p{line-height:1.75;font-size:15px;color:#123532}
    .post-meta{margin-top:18px;color:var(--muted);font-size:14px}
    .post-actions{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
    .small-link{background:transparent;border:1px solid #eef9f5;padding:8px 10px;border-radius:8px}

    /* responsive adjustments */
    @media(max-width:980px){
      .post-btn{align-items:center}
      .post-btn .preview{display:none}
      aside.sidebar{order:2}
      main.content{order:1}
    }

    /* misc */
    .empty{padding:40px;text-align:center;color:var(--muted)}
  </style>
</head>
<body>

  <!-- TOP NAV -->
  <header class="sitebar" role="banner">
    <div class="navwrap">
      <div class="nav-left">
        <div class="brand">Jeet S Singh</div>
        <nav class="navlinks" aria-label="Primary">
          <a href="index.html">üè† Home</a>
          <a href="blog.html" aria-current="page">üìù Blogs</a>
        </nav>
      </div>

      <div class="top-actions">
        <a class="btn" href="ebook.html" target="_blank">üìò Read Free Mini eBook</a>
        <a class="btn ghost" href="https://www.amazon.in/dp/B0FPHVNRBK" target="_blank">Buy on Amazon</a>
      </div>
    </div>
  </header>

  <!-- PAGE WRAPPER -->
  <div class="wrap" role="main">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="card" aria-labelledby="sidebar-heading">
        <h3 id="sidebar-heading" style="margin:0 0 10px 0;color:#06493f">All Posts</h3>

        <div class="search">
          <input id="post-search" type="search" placeholder="Search posts by title or preview‚Ä¶" aria-label="Search posts">
        </div>

        <div class="series-filter" id="series-filter" aria-hidden="false" style="margin-top:12px">
          <!-- dynamic series tags inserted here -->
        </div>

        <ul id="posts-list" class="posts-list" role="list" aria-live="polite">
          <!-- posts inserted here by script -->
        </ul>

        <div style="margin-top:12px;font-size:13px;color:var(--muted)">Tip: Click a post to read ‚Äî direct links supported (example: <code>blog.html#13</code>).</div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
      <div id="post-content" class="post-card">
        <div class="empty">Loading posts‚Ä¶</div>
      </div>
    </main>
  </div>

  <!-- AJAX + Rendering Script -->
  <script>
  (function(){
    const POSTS_JSON = 'posts.json'; // manifest file (root)
    const postsListEl = document.getElementById('posts-list');
    const contentEl = document.getElementById('post-content');
    const searchInput = document.getElementById('post-search');
    const seriesFilterWrap = document.getElementById('series-filter');

    let POSTS = []; // manifest
    let ACTIVE_SERIES = null;

    // fetch manifest and init
    async function init(){
      try {
        const res = await fetch(POSTS_JSON + '?ts=' + Date.now());
        if (!res.ok) throw new Error('Could not fetch posts.json');
        POSTS = await res.json();

        // build series list
        buildSeriesFilter(POSTS);

        // render sidebar
        renderSidebar(POSTS);

        // handle initial hash (direct link)
        const idFromHash = location.hash.replace('#','');
        if (idFromHash) {
          const p = POSTS.find(x=>String(x.id)===String(idFromHash));
          if (p) return loadPost(p);
        }
        if (POSTS.length) loadPost(POSTS[0]);
      } catch (err) {
        console.error(err);
        postsListEl.innerHTML = '<li class="empty">Failed to load posts manifest.</li>';
        contentEl.innerHTML = '<div class="empty">Content unavailable ‚Äî check posts.json in repo.</div>';
      }
    }

    // build unique series tags
    function buildSeriesFilter(posts){
      const series = Array.from(new Set(posts.map(p => p.series || 'General')));
      series.unshift('All');
      series.forEach(s => {
        const but = document.createElement('button');
        but.type = 'button';
        but.className = 'tag';
        but.textContent = s;
        but.dataset.series = s === 'All' ? '' : s;
        if (s === 'All') but.classList.add('active');
        but.addEventListener('click', () => {
          document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
          but.classList.add('active');
          ACTIVE_SERIES = but.dataset.series || null;
          filterAndRender();
        });
        seriesFilterWrap.appendChild(but);
      });
    }

    // filter posts by search & series
    function filterAndRender(){
      const q = (searchInput.value || '').trim().toLowerCase();
      let filtered = POSTS.slice();
      if (ACTIVE_SERIES) filtered = filtered.filter(p => (p.series || '') === ACTIVE_SERIES);
      if (q) filtered = filtered.filter(p => (p.title + ' ' + p.preview).toLowerCase().includes(q));
      renderSidebar(filtered);
    }

    // render sidebar list
    function renderSidebar(list){
      postsListEl.innerHTML = '';
      if (!list.length) {
        postsListEl.innerHTML = '<li class="empty">No posts found.</li>';
        return;
      }
      list.forEach(post => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.className = 'post-btn';
        btn.dataset.id = post.id;
        btn.innerHTML = '<strong>' + escapeHtml(post.title) + '</strong>' +
                        (post.preview ? ('<div class="preview">' + escapeHtml(post.preview) + '</div>') : '');
        btn.addEventListener('click', ()=> loadPost(post));
        li.appendChild(btn);
        postsListEl.appendChild(li);
      });
      // try to set active based on current hash
      const currentHash = location.hash.replace('#','');
      if (currentHash) {
        const activeBtn = Array.from(document.querySelectorAll('.post-btn')).find(b => b.dataset.id === currentHash);
        if (activeBtn) {
          document.querySelectorAll('.post-btn').forEach(x=>x.classList.remove('active'));
          activeBtn.classList.add('active');
        }
      }
    }

    // load a post file and inject into content area
    async function loadPost(post){
      try {
        // active state in sidebar
        document.querySelectorAll('.post-btn').forEach(b=>b.classList.remove('active'));
        const btn = document.querySelector(`.post-btn[data-id="${post.id}"]`);
        if (btn) btn.classList.add('active');

        // update URL
        history.replaceState(null, '', '#'+post.id);

        // temporary loading state
        contentEl.innerHTML = '<div class="empty">Loading article‚Ä¶</div>';

        const r = await fetch(post.file + '?ts=' + Date.now());
        if (!r.ok) throw new Error('Post file not found: ' + post.file);
        let html = await r.text();

        // ensure the fragment has author footer; if not, append small footer
        if (!/<footer[\s>]/i.test(html)) {
          html += `<footer class="post-meta" style="margin-top:18px">
                    <p>‚úçÔ∏è Written by <strong>Jeet S Singh</strong>, Author of
                      <a href="https://www.amazon.in/dp/B0FPHVNRBK" target="_blank">‚ÄúDiscipline Se Success Tak‚Äù</a>
                    </p>
                   </footer>`;
        } else {
          // add amazon link if not present
          if (!/amazon\.in\/dp\/B0FPHVNRBK/i.test(html)) {
            html += `<div style="margin-top:14px;"><a class="small-link" href="https://www.amazon.in/dp/B0FPHVNRBK" target="_blank">Buy on Amazon ‚Äî Discipline Se Success Tak</a></div>`;
          }
        }

        contentEl.innerHTML = html;

        // optional: scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } catch (err) {
        console.error(err);
        contentEl.innerHTML = '<div class="empty">Failed to load article. Check console for errors.</div>';
      }
    }

    // escape helper to avoid html injection when rendering titles/previews
    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, function(m) {
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]);
      });
    }

    // search input
    searchInput.addEventListener('input', function(){ filterAndRender(); });

    // keyboard: navigate next/prev with n / p
    document.addEventListener('keydown', function(e){
      if (e.key === 'n') { navigateOffset(1); }
      if (e.key === 'p') { navigateOffset(-1); }
    });
    function navigateOffset(offset){
      const visibleBtns = Array.from(document.querySelectorAll('.post-btn'));
      if (!visibleBtns.length) return;
      const activeIndex = visibleBtns.findIndex(b => b.classList.contains('active'));
      let next = (activeIndex === -1) ? 0 : activeIndex + offset;
      if (next < 0) next = 0;
      if (next >= visibleBtns.length) next = visibleBtns.length - 1;
      visibleBtns[next].click();
      visibleBtns[next].scrollIntoView({block:'nearest'});
    }

    // init on DOM ready
    document.addEventListener('DOMContentLoaded', init);
  })();
  </script>

</body>
</html>
