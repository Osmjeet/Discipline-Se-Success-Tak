<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blogs ‚Äî Discipline Se Success Tak</title>
  <meta name="description" content="Series-wise blogs. Click Read to expand a post inline. Uses posts.json (root) and posts/*.html files." />
  <style>
    :root{
      --accent:#0b8f76;
      --accent-dark:#06664f;
      --bg:#f7fffc;
      --card:#ffffff;
      --muted:#60786f;
      --text:#0b2f29;
      --radius:12px;
      --maxw:900px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, "Noto Sans Devanagari", system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
    header{background:var(--accent-dark);color:#fff;padding:12px 18px;position:sticky;top:0;z-index:60}
    .nav{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;gap:18px;flex-wrap:wrap}
    .brand{font-weight:800}
    nav a{color:#fff;text-decoration:none;margin-right:12px;font-weight:600}
    main{max-width:var(--maxw);margin:22px auto;padding:18px}
    .panel{background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:0 8px 22px rgba(6,18,16,0.04);border:1px solid #e7f6f0}
    .search{margin-bottom:12px}
    .search input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e5f4ed;font-size:15px}
    .list{margin-top:10px}
    .item{display:flex;flex-wrap:wrap;gap:12px;padding:14px;border-radius:10px;border:1px solid #eef8f3;margin-bottom:12px;background:linear-gradient(180deg,#ffffff,#fbfffd)}
    .info{flex:1;min-width:220px}
    .title{font-size:18px;color:var(--accent-dark);margin:0 0 8px 0;font-weight:700}
    .preview{color:var(--muted);line-height:1.6}
    .meta{font-size:13px;color:#9fb3aa;margin-top:8px}
    .actions{min-width:120px;display:flex;align-items:center;justify-content:flex-end}
    .read{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:700}
    .read:hover{background:var(--accent-dark)}
    .post-area{margin-top:16px}
    .post-card{padding:18px;border-radius:10px;background:#fff;border:1px solid #eef8f4}
    .post-card h2{margin-top:0;color:var(--accent-dark)}
    .note{color:var(--muted);font-size:14px;margin-top:10px}
    .err{color:#c0392b;font-weight:700}
    footer{max-width:var(--maxw);margin:26px auto;text-align:center;color:var(--muted);font-size:14px}
    @media(max-width:700px){
      .actions{justify-content:flex-start;width:100%}
      .read{width:100%}
    }
  </style>
</head>
<body>

  <header>
    <div class="nav">
      <div class="brand">üìö Discipline Se Success Tak</div>
      <div style="margin-left:auto">
        <nav>
          <a href="index.html">üè† Home</a>
          <a href="blog.html">üìù Blogs</a>
          <a href="author.html">üë§ Author</a>
          <a href="ebook.html">üìò Free eBook</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <div class="panel">
      <div class="search">
        <input id="q" placeholder="Search title or preview..." aria-label="Search blogs">
      </div>

      <div id="list" class="list">
        <!-- blog items will be injected here -->
      </div>

      <div id="load-error" class="err" style="display:none;margin-top:12px">Unable to load posts. Check <code>posts.json</code> path and content.</div>

      <div class="post-area" id="post-area" aria-live="polite">
        <!-- expanded post will be inserted here -->
      </div>
    </div>
  </main>

  <footer>¬© 2025 Jeet S Singh ‚Äî Discipline ‚Ä¢ Faith ‚Ä¢ Success</footer>

<script>
/*
Simple blog listing + inline load script.
Requires:
 - posts.json at repo root: an array of { id, title, preview, file, series? }
 - posts/<file> HTML files to exist (e.g. posts/blog11.html)
Behavior:
 - loads posts.json, renders list
 - search filters by title+preview
 - clicking Read loads post.file via fetch and inserts into #post-area
*/

(function(){
  const POSTS_JSON = './posts.json';
  const listEl = document.getElementById('list');
  const postArea = document.getElementById('post-area');
  const errEl = document.getElementById('load-error');
  const qEl = document.getElementById('q');
  let posts = [];

  function renderList(items){
    listEl.innerHTML = '';
    if(!items.length){
      listEl.innerHTML = '<div class="note">No posts found.</div>';
      return;
    }
    items.forEach(p => {
      const item = document.createElement('div');
      item.className = 'item';
      // left info
      const info = document.createElement('div');
      info.className = 'info';
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = p.title;
      const preview = document.createElement('div');
      preview.className = 'preview';
      preview.textContent = p.preview;
      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.textContent = p.series ? `Series: ${p.series} ‚Äî ID: ${p.id}` : `ID: ${p.id}`;
      info.appendChild(title);
      info.appendChild(preview);
      info.appendChild(meta);
      // actions
      const actions = document.createElement('div');
      actions.className = 'actions';
      const read = document.createElement('a');
      read.href = '#';
      read.className = 'read';
      read.textContent = 'Read';
      read.addEventListener('click', function(e){
        e.preventDefault();
        // highlight active ‚Äî remove previous
        document.querySelectorAll('.item').forEach(n=>n.style.boxShadow='none');
        item.style.boxShadow = '0 8px 20px rgba(11,143,118,0.08)';
        loadPost(p);
      });
      actions.appendChild(read);

      item.appendChild(info);
      item.appendChild(actions);
      listEl.appendChild(item);
    });
  }

  function loadPost(post){
    postArea.innerHTML = '<div class="post-card"><div class="note">Loading post...</div></div>';
    fetch(post.file).then(r=>{
      if(!r.ok) throw new Error('file-not-found');
      return r.text();
    }).then(html=>{
      // create container and insert
      postArea.innerHTML = '';
      const wrap = document.createElement('div');
      wrap.className = 'post-card';
      const h = document.createElement('h2');
      h.textContent = post.title;
      wrap.appendChild(h);
      const by = document.createElement('div');
      by.className = 'meta';
      by.style.marginBottom = '12px';
      by.textContent = `Written by Jeet S Singh ‚Äî Author of "Discipline Se Success Tak"`;
      wrap.appendChild(by);
      // insert html content (assumes safe trusted content from your repo)
      const content = document.createElement('div');
      content.innerHTML = html;
      wrap.appendChild(content);
      postArea.appendChild(wrap);
      // scroll to the expanded post
      wrap.scrollIntoView({behavior:'smooth', block:'start'});
    }).catch(err=>{
      postArea.innerHTML = '<div class="err">Unable to load post. Check file path: ' + post.file + '</div>';
    });
  }

  // fetch posts.json
  fetch(POSTS_JSON).then(r=>{
    if(!r.ok) throw new Error('missing');
    return r.json();
  }).then(data=>{
    if(!Array.isArray(data)) throw new Error('invalid');
    posts = data.sort((a,b)=> (a.id || 0) - (b.id || 0));
    renderList(posts);
    errEl.style.display = 'none';
  }).catch(e=>{
    console.error(e);
    errEl.style.display = 'block';
    listEl.innerHTML = '';
  });

  // search
  qEl.addEventListener('input', function(){
    const q = qEl.value.trim().toLowerCase();
    if(!q) return renderList(posts);
    const filtered = posts.filter(p => (p.title + ' ' + p.preview).toLowerCase().includes(q));
    renderList(filtered);
  });

})();
</script>

</body>
</html>
