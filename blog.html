<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blogs ‚Äî Jeet S Singh (Author of Discipline Se Success Tak)</title>
  <meta name="description" content="Blogs by Jeet S Singh ‚Äî grouped series (1-10 and 11-20). Click a title to expand the full post inline." />
  <style>
    :root{
      --bg:#f7fbfa; --card:#ffffff; --accent:#0bb39a; --accent-dark:#078a72;
      --muted:#5b6b73; --maxw:1100px; --radius:12px; --text:#0e2b26;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, "Noto Sans Devanagari", system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:var(--bg); color:var(--text)}
    a{color:var(--accent-dark);text-decoration:none}
    header.top{background:#06493f;padding:12px 18px;position:sticky;top:0;z-index:30}
    .nav{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between;color:#fff}
    .brand{font-weight:800;font-size:16px}
    .nav a{color:#fff;margin-left:12px;font-weight:700;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:20px auto;padding:0 18px}
    .grid{display:grid;grid-template-columns:360px 1fr;gap:20px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .panel{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(8,18,16,0.05);border:1px solid #eef9f5}
    .series-header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:10px;background:#f0fff9;color:#044b3f;font-weight:800;cursor:pointer;margin-bottom:8px}
    .posts-list{list-style:none;padding:6px 0;margin:8px 0 0 0}
    .post-item{border-radius:8px;padding:8px;margin-bottom:8px;border:1px solid #f1fbf7;background:#fff}
    .post-title{display:flex;justify-content:space-between;align-items:center;gap:10px;cursor:pointer}
    .post-title strong{font-size:15px;color:#06493f}
    .post-preview{display:block;color:var(--muted);font-size:13px;margin-top:6px}
    .expand-area{margin-top:10px;padding:12px;border-radius:8px;background:#fbfffb;border:1px solid #eaf8f1;display:none}
    .small-meta{font-size:13px;color:var(--muted);margin-top:10px}
    .empty{padding:28px;text-align:center;color:var(--muted)}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;font-weight:800;text-decoration:none}
    .search{margin-bottom:10px}
    .search input{width:100%;padding:10px;border-radius:8px;border:1px solid #e8f6f2;font-size:14px}
    footer{margin-top:22px;text-align:center;color:var(--muted);font-size:13px}
  </style>
</head>
<body>

  <!-- TOP NAV -->
  <header class="top" role="banner">
    <div class="nav">
      <div style="display:flex;align-items:center;gap:14px">
        <div class="brand">Jeet S Singh</div>
        <nav aria-label="main-nav">
          <a href="index.html">üè† Home</a>
          <a href="blog.html">üìù Blogs</a>
          <a href="author.html">üë§ Author</a>
        </nav>
      </div>
      <div>
        <a class="btn" href="ebook.html" target="_blank">üìò Free Mini eBook</a>
      </div>
    </div>
  </header>

  <main class="wrap" role="main">
    <div class="grid">
      <!-- LEFT: Series / List -->
      <aside class="panel" aria-labelledby="series-title">
        <h3 id="series-title" style="margin:0 0 10px 0;color:#06493f">Series</h3>

        <div class="search">
          <input id="search" type="search" placeholder="Search titles / previews..." aria-label="Search posts">
        </div>

        <!-- Series A: 1-10 -->
        <div id="seriesA">
          <div class="series-header" data-series="A">
            <span>Series 1‚Äì10</span><span class="count" id="countA">(loading)</span>
          </div>
          <ul id="listA" class="posts-list" aria-live="polite"></ul>
        </div>

        <!-- Series B: 11-20 -->
        <div id="seriesB" style="margin-top:12px">
          <div class="series-header" data-series="B">
            <span>Series 11‚Äì20</span><span class="count" id="countB">(loading)</span>
          </div>
          <ul id="listB" class="posts-list" aria-live="polite"></ul>
        </div>

        <div style="margin-top:12px;color:var(--muted);font-size:13px">Tip: Click a title to expand the full post inline. Direct links like <code>blog.html#13</code> open that post.</div>
      </aside>

      <!-- RIGHT: Content / fallback area -->
      <section id="content-area" class="panel">
        <div id="fallback" class="empty">Choose a post from left ‚Äî content will expand inline below the title.</div>
      </section>
    </div>

    <footer>
      ¬© 2025 Jeet S Singh ‚Äî Discipline ‚Ä¢ Faith ‚Ä¢ Success
    </footer>
  </main>

  <script>
  (function(){
    const MANIFEST = 'posts.json';
    const listA = document.getElementById('listA');
    const listB = document.getElementById('listB');
    const countA = document.getElementById('countA');
    const countB = document.getElementById('countB');
    const searchInput = document.getElementById('search');
    const fallback = document.getElementById('fallback');

    let POSTS = [];

    // helper: escape HTML for safe display inside title/preview (we store raw in manifest)
    function esc(s){ return String(s || '').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m])); }

    // load manifest and build lists
    async function init(){
      try {
        const res = await fetch(MANIFEST + '?ts=' + Date.now());
        if (!res.ok) throw new Error('Could not fetch posts.json');
        POSTS = await res.json();

        // Partition into series A (id 1-10) and B (11-20). If manifest uses series field, prefer that.
        const A = POSTS.filter(p => Number(p.id) >=1 && Number(p.id) <=10);
        const B = POSTS.filter(p => Number(p.id) >=11 && Number(p.id) <=9999);

        fillList(A, listA);
        fillList(B, listB);

        countA.textContent = `(${A.length})`;
        countB.textContent = `(${B.length})`;

        // Expand series headers toggle
        document.querySelectorAll('.series-header').forEach(h=>{
          h.addEventListener('click', ()=> {
            const series = h.dataset.series;
            const ul = series === 'A' ? listA : listB;
            ul.style.display = (ul.style.display === 'block') ? 'none' : 'block';
          });
        });

        // if hash present, open that post
        const h = location.hash.replace('#','');
        if (h) {
          const post = POSTS.find(p => String(p.id) === String(h));
          if (post) {
            // ensure correct list visible
            if (Number(h) <= 10) listA.style.display = 'block'; else listB.style.display = 'block';
            // load inline (simulate click)
            const btn = document.querySelector(`.post-toggle[data-id="${h}"]`);
            if (btn) btn.click();
          }
        }
      } catch (err) {
        console.error(err);
        fallback.textContent = 'Error loading posts.json ‚Äî check that posts.json exists in repo root and is valid JSON.';
      }
    }

    // fill a specific UL with posts entries
    function fillList(arr, ul){
      ul.innerHTML = '';
      if (!arr || arr.length === 0){
        const li = document.createElement('li');
        li.className = 'post-item';
        li.innerHTML = '<div class="post-title"><strong>No posts</strong></div>';
        ul.appendChild(li);
        return;
      }
      arr.forEach(p => {
        const li = document.createElement('li');
        li.className = 'post-item';
        li.dataset.postId = p.id;
        li.innerHTML = `
          <div class="post-title" role="button">
            <div>
              <strong>${esc(p.title)}</strong>
              ${p.preview ? `<div class="post-preview">${esc(p.preview)}</div>` : ''}
            </div>
            <div class="controls">
              <button class="post-toggle btn" data-id="${p.id}" aria-expanded="false">Read</button>
            </div>
          </div>
          <div class="expand-area" id="expand-${p.id}" aria-hidden="true"></div>
        `;
        ul.appendChild(li);
      });

      // attach click handlers for toggles (delegation safe)
      ul.querySelectorAll('.post-toggle').forEach(btn => {
        btn.addEventListener('click', async function(e){
          const id = this.dataset.id;
          const expandArea = document.getElementById('expand-' + id);
          const isOpen = expandArea.style.display === 'block';

          // close any other open expand areas
          document.querySelectorAll('.expand-area').forEach(x => {
            if (x.id !== 'expand-' + id) { x.style.display = 'none'; x.setAttribute('aria-hidden','true'); }
          });
          document.querySelectorAll('.post-toggle').forEach(t => t.setAttribute('aria-expanded','false'));

          if (isOpen) {
            // close this
            expandArea.style.display = 'none';
            expandArea.setAttribute('aria-hidden','true');
            this.setAttribute('aria-expanded','false');
            // update hash to none
            history.replaceState(null, '', ' ');
            return;
          }

          // open this: fetch fragment and inject
          this.textContent = 'Loading...';
          try {
            const post = POSTS.find(p=>String(p.id)===String(id));
            const r = await fetch(post.file + '?ts=' + Date.now());
            if (!r.ok) throw new Error('Could not fetch post file: ' + post.file);
            let html = await r.text();

            // avoid duplicate author/footer: if fragment already contains author or "Written by" or "Jeet S Singh" or amazon link, don't append footer
            const lower = html.toLowerCase();
            const hasAuthor = /written by|‚úçÔ∏è|jeet s singh|author of|amazon\.in\/dp\/b0fphvnrbk/.test(lower);

            if (!hasAuthor) {
              html += `<footer class="small-meta" style="margin-top:12px">
                        ‚úçÔ∏è Written by <strong>Jeet S Singh</strong> ‚Äî Author of
                        <a href="https://www.amazon.in/dp/B0FPHVNRBK" target="_blank">‚ÄúDiscipline Se Success Tak‚Äù</a>
                       </footer>`;
            } else if (!/amazon\.in\/dp\/b0fphvnrbk/.test(lower)) {
              html += `<div style="margin-top:10px"><a class="small-meta" href="https://www.amazon.in/dp/B0FPHVNRBK" target="_blank">Buy on Amazon ‚Äî Discipline Se Success Tak</a></div>`;
            }

            expandArea.innerHTML = html;
            expandArea.style.display = 'block';
            expandArea.setAttribute('aria-hidden','false');
            this.setAttribute('aria-expanded','true');

            // update hash for direct linking
            history.replaceState(null, '', '#'+id);

            // scroll to the opened area smoothly
            setTimeout(()=> {
              expandArea.scrollIntoView({behavior:'smooth', block:'center'});
            },120);

          } catch (err) {
            console.error(err);
            expandArea.innerHTML = '<div style="color:#a33">Failed to load article. Check console.</div>';
            expandArea.style.display = 'block';
            expandArea.setAttribute('aria-hidden','false');
          } finally {
            this.textContent = 'Read';
          }
        });
      });
    }

    // simple search filter
    searchInput.addEventListener('input', function(){
      const q = (this.value || '').toLowerCase().trim();
      document.querySelectorAll('.post-item').forEach(li=>{
        const title = (li.querySelector('strong')?.textContent || '').toLowerCase();
        const preview = (li.querySelector('.post-preview')?.textContent || '').toLowerCase();
        const show = q === '' ? true : (title + ' ' + preview).includes(q);
        li.style.display = show ? 'block' : 'none';
      });
    });

    // init
    document.addEventListener('DOMContentLoaded', init);
  })();
  </script>
</body>
</html>
